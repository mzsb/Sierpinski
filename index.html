<body style = "background: #000000;"> 
	<canvas id="canv"></canvas>
	<div class="slidecontainer" style=" display: flex; align-items: center; justify-content: center;">
		<input type="range" min="2.001" max="10" value="3" step="0.1" id="range" class="slider">
	</div>
</body>
<script>
	var maxWidth = window.innerWidth - 15;
	var maxHeight = window.innerHeight - 50;
	const canvas = document.getElementById('canv');
	const slider = document.getElementById("range");
	canvas.width = maxWidth;
	canvas.height = maxHeight;
	const context = canvas.getContext('2d');
	
	var x = maxWidth / 2;
	var y = maxHeight / 2;
	var pixel = 0.8;
	var radius = (x > y ? y : x);

	context.fillStyle = 'rgba(255, 255, 255, 1)';

	sierpinski(slider.value);
	slider.oninput = function() {
		sierpinski(this.value);
	}

	function sierpinski(vertices) {
		context.clearRect(0, 0, canvas.width, canvas.height);
		const polygon = [];
	
		polygon[0] = [0, -radius];

		for(i = 1; i < vertices; i++) {
			var angle = i * 2 * Math.PI / vertices;
			polygon[i] = [
				(polygon[0][0] * Math.cos(angle)) - (polygon[0][1] * Math.sin(angle)) + x,
				(polygon[0][0] * Math.sin(angle)) + (polygon[0][1] * Math.cos(angle)) + y
			];
		}
		polygon[0] = [ polygon[0][0] + x, polygon[0][1] + y ];	
	
		var randomCoord = [x, y];
		var randomPoint = [];

		var color;
		
		for(n = 0; n < 50000; n++) {
			randomPoint = polygon[Math.floor(Math.random() * vertices)];
		
			randomCoord = [(randomPoint[0] + randomCoord[0]) / 2, (randomPoint[1] + randomCoord[1]) / 2]

			context.fillStyle = `rgb(${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)})`;
			
			context.fillRect(randomCoord[0], randomCoord[1], pixel, pixel);
		}
	}

	function reportWindowSize(e) {
		maxWidth = window.innerWidth - 15;
		maxHeight = window.innerHeight - 50;
		canvas.width = maxWidth;
		canvas.height = maxHeight;
	
		x = maxWidth / 2;
		y = maxHeight / 2;
		radius = (x > y ? y : x);
		sierpinski(slider.value);
	}

	window.onresize = reportWindowSize;
</script>

<style>
 
#canv {
	border: 0px;
	background: #000000;
}

.slider {
  -webkit-appearance: none;
  width: 50%;
  height: 10px;
  border-radius: 5px;  
  background: #ffffff;
  outline: none;
  opacity: 0.5;
  -webkit-transition: .2s;
  transition: opacity .2s;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%; 
  background: #ffffff;
  cursor: pointer;
}

.slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #ffffff;
  cursor: pointer;
}
</style>