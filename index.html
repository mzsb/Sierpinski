<body style="background: #000000; margin: 0; padding: 0; border: 0;">
	<canvas id="canv"></canvas>
	<input type="range" min="2" max="12" value="3" step="0.001" id="vertice-slider" class="slider">
	<input type="range" min="1" max="11" value="2" step="0.001" id="scale-slider" class="slider">
	<input type="range" min="0" max="10" value="1" step="0.001" id="pixel-slider" class="slider">
</body>
<script>
	const canvas = document.getElementById('canv');
	const sliders = [
		document.getElementById("vertice-slider"),
		document.getElementById("scale-slider"),
		document.getElementById("pixel-slider")
	];
	const context = canvas.getContext('2d');

	init();

	function init() {
		var maxWidth = window.innerWidth - 3;
		var maxHeight = window.innerHeight - 1;
		canvas.width = maxWidth;
		canvas.height = maxHeight;
		var x = maxWidth / 2;
		y = (maxWidth > maxHeight ? maxHeight : maxWidth) / 2;
		var radius = (x > y ? y : x);

		for (i = 0; i < sliders.length; i++) {
			sliders[i].oninput = () => sierpinski(x, y, radius);
			var angle = i * 2 * Math.PI / 3;

			sliders[i].style.width = 2 * radius;
			sliders[i].style.left = x - radius;
			sliders[i].style.top = y;
		}

		sierpinski(x, y, radius);
	}

	function sierpinski(x, y, radius) {
		const vertices = sliders[0].value;
		const scale = sliders[1].value;
		const pixel = sliders[2].value;

		context.clearRect(0, 0, canvas.width, canvas.height);

		const polygon = [];
		polygon[0] = [0, -radius * (1 - 1 / scale)];
		var angle;
		for (j = 1; j < vertices; j++) {
			angle = j * 6.28318530718 / vertices;
			polygon[j] = [
				(polygon[0][0] * Math.cos(angle)) - (polygon[0][1] * Math.sin(angle)) + x,
				(polygon[0][0] * Math.sin(angle)) + (polygon[0][1] * Math.cos(angle)) + y
			];
		}
		polygon[0] = [polygon[0][0] + x, polygon[0][1] + y];

		var randomX = x;
		var randomY = y;
		var randomVertex = [];
		var pixelOffset;
		for (n = 0; n < 50000; n++) {
			randomVertex = polygon[Math.floor(Math.random() * vertices)];

			randomX = ((randomVertex[0] * scale - x) + randomX) / scale;
			randomY = ((randomVertex[1] * scale - y) + randomY) / scale;

			context.fillStyle = `#${Math.floor(Math.random()*16777215).toString(16)}`;

			context.fillRect(randomX, randomY, pixel, pixel);
		}
	}

	function reportWindowSize() {
		init();
	}

	window.onresize = reportWindowSize;
</script>

<style>
	#canv {
		transform: scale(0.9);
		border: 0px;
		height: 100%;
		width: 100%;
		background: #000000;
	}

	#vertice-slider {
		transform: rotate(150deg);
	}

	#scale-slider {
		transform: rotate(30deg);
	}

	#pixel-slider {
		transform: rotate(-90deg);
	}

	#vertice-slider::-webkit-slider-thumb {
		background: purple;
	}

	#scale-slider::-webkit-slider-thumb {
		background: green;
	}

	#pixel-slider::-webkit-slider-thumb {
		background: orange;
	}

	.slider {
		position: absolute;
		-webkit-appearance: none;
		height: 0;
		border-radius: 5px;
		background: transparent;
		cursor: pointer;
		margin: 0 0 0 2;
	}

	.slider::-webkit-slider-thumb {
		-webkit-appearance: none;
		appearance: none;
		width: 1.7vmin;
		height: 1.7vmin;
		opacity: 0.7;
		border-radius: 100%;
		cursor: pointer;
	}

</style>