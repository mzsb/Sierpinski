<body style="background: #000000; margin: 0; padding: 0; border: 0;">

	<input type="range" min="2" max="10" value="3" step="0.001" id="vertice-slider" class="slider">
	<input type="range" min="1" max="10" value="2" step="0.001" id="scale-slider" class="slider">
	<input type="range" min="0" max="10" value="1" step="0.001" id="spin-slider" class="slider">

	<canvas id="canv"></canvas>

</body>
<script>
	var maxWidth = window.innerWidth - 1;
	var maxHeight = window.innerHeight - 1;
	const canvas = document.getElementById('canv');
	const silders = [
		document.getElementById("vertice-slider"),
		document.getElementById("scale-slider"),
		document.getElementById("spin-slider")
	];

	canvas.width = maxWidth;
	canvas.height = maxHeight;
	const context = canvas.getContext('2d');

	var x = maxWidth / 2;
	y = (maxWidth > maxHeight ? maxHeight : maxWidth) / 2;
	var pixel = 0.8;
	var radius = (x > y ? y : x);

	silders.forEach(slider => {
		slider.oninput = () => sierpinski();
	});

	const sliderPionts = [];
	sliderPionts[0] = [0, 0];
	for (i = 1; i < 3; i++) {
			var angle = i * 2 * Math.PI / 3;
			sliderPionts[i] = [
				(sliderPionts[0][0] * Math.cos(angle)) - (sliderPionts[0][1] * Math.sin(angle)),
				(sliderPionts[0][0] * Math.sin(angle)) + (sliderPionts[0][1] * Math.cos(angle))
		];
	}

	silders[0].value = (silders[0].min + silders[0].max) / 2;
	silders[0].style.left = sliderPionts[0][0] + x - (37 * maxWidth / 200);
	silders[0].style.top = sliderPionts[0][1] + y;

	silders[1].style.left = sliderPionts[1][0] + x - (37 * maxWidth / 200);
	silders[1].style.top = sliderPionts[1][1] + y;

	silders[2].style.left = sliderPionts[2][0] + x - (37 * maxWidth / 200);
	silders[2].style.top = sliderPionts[2][1] + y;

	sierpinski();

	function sierpinski() {
		const vertices = silders[0].value;
		const scale = silders[1].value;
		const spin = silders[2].value;

		context.clearRect(0, 0, canvas.width, canvas.height);
		const polygon = [];

		polygon[0] = [0, -radius * (1 - 1 / scale)];

		for (i = 1; i < vertices; i++) {
			var angle = i * 2 * Math.PI * spin / vertices;
			polygon[i] = [
				(polygon[0][0] * Math.cos(angle)) - (polygon[0][1] * Math.sin(angle)) + x,
				(polygon[0][0] * Math.sin(angle)) + (polygon[0][1] * Math.cos(angle)) + y
			];
		}
		polygon[0] = [polygon[0][0] + x, polygon[0][1] + y];

		var randomCoord = [x, y];
		var randomPoint = [];

		var color;

		for (n = 0; n < 50000; n++) {
			randomPoint = polygon[Math.floor(Math.random() * vertices)];

			randomPoint = [randomPoint[0] * scale - x, randomPoint[1] * scale - y];

			randomCoord = [(randomPoint[0] + randomCoord[0]) / scale, (randomPoint[1] + randomCoord[1]) / scale]

			context.fillStyle = `rgb(${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)})`;

			context.fillRect(randomCoord[0], randomCoord[1], pixel, pixel);
		}
	}

	function reportWindowSize(e) {
		maxWidth = window.innerWidth - 15;
		maxHeight = window.innerHeight - 50;
		canvas.width = maxWidth;
		canvas.height = maxHeight;

		x = maxWidth / 2;
		y = (maxWidth > maxHeight ? maxHeight : maxWidth) / 2;
		radius = (x > y ? y : x);

		const sliderPionts = [];
		sliderPionts[0] = [0, 0];
		for (i = 1; i < 3; i++) {
				var angle = i * 2 * Math.PI / 3;
				sliderPionts[i] = [
					(sliderPionts[0][0] * Math.cos(angle)) - (sliderPionts[0][1] * Math.sin(angle)),
					(sliderPionts[0][0] * Math.sin(angle)) + (sliderPionts[0][1] * Math.cos(angle))
			];
		}

		silders[0].style.left = sliderPionts[0][0] + x - (37 * maxWidth / 200);
		silders[0].style.top = sliderPionts[0][1] + y;

		silders[1].style.left = sliderPionts[1][0] + x - (37 * maxWidth / 200);
		silders[1].style.top = sliderPionts[1][1] + y;

		silders[2].style.left = sliderPionts[2][0] + x - (37 * maxWidth / 200);
		silders[2].style.top = sliderPionts[2][1] + y;

		sierpinski();
	}

	window.onresize = reportWindowSize;
</script>

<style>
	#canv {
		border: 0px;
		height: 100%;
		width: 100%;
		background: #000000;
	}

	#scale-slider {
		transform: rotate(-60deg);
	}

	#spin-slider {
		transform: rotate(60deg);
	}

	#vertice-slider::-webkit-slider-thumb {
		background: red;
		opacity: 0.5;
	}

	#scale-slider::-webkit-slider-thumb {
		background: green;
		opacity: 0.5;
	}

	#spin-slider::-webkit-slider-thumb {
		background: blue;
		opacity: 0.5;
	}

	.slider {
		position: absolute;
		-webkit-appearance: none;
		width: 37%;
		height: 5px;
		border-radius: 5px;
		background: transparent;
		outline: none;
		opacity: 1;
		-webkit-transition: .2s;
		transition: opacity .2s;
	}

	.slider::-webkit-slider-thumb {
		-webkit-appearance: none;
		appearance: none;
		width: 1em;
		height: 1em;
		opacity: 0.7;
		border-radius: 100%;
		cursor: pointer;
	}

</style>